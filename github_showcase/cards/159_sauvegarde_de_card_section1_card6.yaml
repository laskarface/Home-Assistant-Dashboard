type: custom:button-card
entity: weather.home
show_name: false
show_icon: false
show_state: false
tap_action:
  action: more-info
styles:
  card:
  - padding: 0
  - border-radius: 20px
  - background: rgba(0, 0, 0, 0.2)
  - backdrop-filter: blur(20px)
  - -webkit-backdrop-filter: blur(20px)
  - box-shadow: 0 8px 32px rgba(0,0,0,0.3)
  - border: "[[[\n  const alert = states['sensor.91_weather_alert'];\n  if (!alert\
      \ || !alert.attributes) return '1px solid rgba(255,255,255,0.1)';\n  const p\
      \ = ['Vent violent', 'Pluie-inondation', 'Orages', 'Inondation', 'Neige-verglas',\
      \ 'Canicule', 'Grand froid', 'Avalanches', 'Vagues-submersion'];\n  let lvl\
      \ = 'Vert';\n  for (let x of p) {\n    let v = alert.attributes[x];\n    if\
      \ (v === 'Rouge') { lvl = 'Rouge'; break; }\n    if (v === 'Orange' && lvl !==\
      \ 'Rouge') lvl = 'Orange';\n    if (v === 'Jaune' && lvl !== 'Rouge' && lvl\
      \ !== 'Orange') lvl = 'Jaune';\n  }\n  if (lvl === 'Rouge') return '1px solid\
      \ rgba(244, 67, 54, 0.6)';\n  if (lvl === 'Orange') return '1px solid rgba(255,\
      \ 152, 0, 0.6)';\n  if (lvl === 'Jaune') return '1px solid rgba(255, 235, 59,\
      \ 0.4)';\n  return '1px solid rgba(255,255,255,0.1)';\n]]]\n"
  - transition: all 0.5s ease
  - height: 56px
  - overflow: hidden
  grid:
  - grid-template-areas: '"icon details"'
  - grid-template-columns: 130px 1fr
  - grid-template-rows: 56px
  - gap: 0px
  - width: 100%
  - margin: 0
  custom_fields:
    icon:
    - justify-self: stretch
    - align-self: stretch
    - border-right: 2px solid rgba(255,255,255,0.6)
    - border-top-left-radius: 20px
    - border-bottom-left-radius: 20px
    - display: flex
    - align-items: center
    - justify-content: center
    - padding: 0
    details:
    - justify-self: stretch
    - align-self: stretch
    - display: flex
    - flex-direction: column
    - justify-content: center
    - align-items: stretch
    - padding: 0 10px
    - overflow: hidden
    - position: relative
    - pointer-events: none
custom_fields:
  icon: "[[[\n  const weatherState = states['weather.home'];\n  if (!weatherState)\
    \ return \"\";\n  const state = weatherState.state;\n  let color = '#B0BEC5';\n\
    \  let svg = '';\n  \n  if (state === 'sunny' || state === 'clear') { \n    color\
    \ = '#FFA500'; \n    svg = `\n      <svg viewBox=\"0 0 64 64\" style=\"width:\
    \ 30px; height: 30px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5)); transform:\
    \ translateY(3px);\">\n        <g style=\"animation: spin_sun 12s linear infinite;\
    \ transform-origin: 32px 32px;\">\n          <circle cx=\"32\" cy=\"32\" r=\"\
    14\" fill=\"#FFD700\"/>\n          <g stroke=\"#FFD700\" stroke-width=\"4\" stroke-linecap=\"\
    round\">\n            <line x1=\"32\" y1=\"6\" x2=\"32\" y2=\"12\"/><line x1=\"\
    32\" y1=\"52\" x2=\"32\" y2=\"58\"/>\n            <line x1=\"6\" y1=\"32\" x2=\"\
    12\" y2=\"32\"/><line x1=\"52\" y1=\"32\" x2=\"58\" y2=\"32\"/>\n            <line\
    \ x1=\"13.6\" y1=\"13.6\" x2=\"17.8\" y2=\"17.8\"/><line x1=\"46.2\" y1=\"46.2\"\
    \ x2=\"50.4\" y2=\"50.4\"/>\n            <line x1=\"13.6\" y1=\"50.4\" x2=\"17.8\"\
    \ y2=\"46.2\"/><line x1=\"46.2\" y1=\"17.8\" x2=\"50.4\" y2=\"13.6\"/>\n     \
    \     </g>\n        </g>\n      </svg>\n    `;\n  }\n  else if (state === 'partlycloudy')\
    \ {\n    color = '#46D278'; \n    svg = `\n      <svg viewBox=\"0 0 64 64\" style=\"\
    width: 30px; height: 30px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5)); transform:\
    \ translateY(3px);\">\n        <g style=\"animation: spin_sun 12s linear infinite;\
    \ transform-origin: 22px 22px;\">\n          <circle cx=\"22\" cy=\"22\" r=\"\
    10\" fill=\"#FFD700\"/>\n          <g stroke=\"#FFD700\" stroke-width=\"3\" stroke-linecap=\"\
    round\">\n            <line x1=\"22\" y1=\"4\" x2=\"22\" y2=\"8\"/><line x1=\"\
    22\" y1=\"36\" x2=\"22\" y2=\"40\"/>\n            <line x1=\"4\" y1=\"22\" x2=\"\
    8\" y2=\"22\"/><line x1=\"36\" y1=\"22\" x2=\"40\" y2=\"22\"/>\n            <line\
    \ x1=\"9.3\" y1=\"9.3\" x2=\"12.1\" y2=\"12.1\"/><line x1=\"31.9\" y1=\"31.9\"\
    \ x2=\"34.7\" y2=\"34.7\"/>\n            <line x1=\"9.3\" y1=\"34.7\" x2=\"12.1\"\
    \ y2=\"31.9\"/><line x1=\"31.9\" y1=\"12.1\" x2=\"34.7\" y2=\"9.3\"/>\n      \
    \    </g>\n        </g>\n        <path d=\"M48 44a10 10 0 0 0-4-19 14 14 0 0 0-26\
    \ 2 8 8 0 0 0-2 15h32z\" fill=\"#E0E0E0\" />\n      </svg>\n    `;\n  }\n  else\
    \ if (state === 'rainy' || state === 'pouring') { \n    color = '#008CFF'; \n\
    \    svg = `\n      <svg viewBox=\"0 0 64 64\" style=\"width: 30px; height: 30px;\
    \ filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5)); transform: translateY(3px);\"\
    >\n        <path d=\"M46 38a10 10 0 0 0-4-19 14 14 0 0 0-26 2 8 8 0 0 0-2 15h32z\"\
    \ fill=\"#90A4AE\" />\n        <g stroke=\"#4FC3F7\" stroke-width=\"3\" stroke-linecap=\"\
    round\">\n          <line x1=\"22\" y1=\"42\" x2=\"18\" y2=\"50\" style=\"animation:\
    \ rain_drop 1s linear infinite;\" />\n          <line x1=\"32\" y1=\"42\" x2=\"\
    28\" y2=\"50\" style=\"animation: rain_drop 1s linear infinite 0.33s;\" />\n \
    \         <line x1=\"42\" y1=\"42\" x2=\"38\" y2=\"50\" style=\"animation: rain_drop\
    \ 1s linear infinite 0.66s;\" />\n        </g>\n      </svg>\n    `;\n  }\n  else\
    \ if (state === 'lightning' || state === 'lightning-rainy') { \n    color = '#BA55D3';\
    \ \n    svg = `\n      <svg viewBox=\"0 0 64 64\" style=\"width: 30px; height:\
    \ 30px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5)); transform: translateY(3px);\"\
    >\n        <path d=\"M46 38a10 10 0 0 0-4-19 14 14 0 0 0-26 2 8 8 0 0 0-2 15h32z\"\
    \ fill=\"#78909C\" />\n        <path d=\"M30 38l-6 12h8l-4 10 10-14h-6l4-8z\"\
    \ fill=\"#FFEA00\" style=\"animation: zap_flash 2s infinite;\" />\n      </svg>\n\
    \    `;\n  }\n  else if (state === 'snowy' || state === 'snowy-rainy') { \n  \
    \  color = '#78EBFF'; \n    svg = `\n      <svg viewBox=\"0 0 64 64\" style=\"\
    width: 30px; height: 30px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5)); transform:\
    \ translateY(3px);\">\n        <path d=\"M46 38a10 10 0 0 0-4-19 14 14 0 0 0-26\
    \ 2 8 8 0 0 0-2 15h32z\" fill=\"#B0BEC5\" />\n        <circle cx=\"22\" cy=\"\
    46\" r=\"2.5\" fill=\"#FFFFFF\" style=\"animation: snow_fall 3s infinite;\" />\n\
    \        <circle cx=\"32\" cy=\"44\" r=\"2.5\" fill=\"#FFFFFF\" style=\"animation:\
    \ snow_fall 3s infinite 1s;\" />\n        <circle cx=\"42\" cy=\"48\" r=\"2.5\"\
    \ fill=\"#FFFFFF\" style=\"animation: snow_fall 3s infinite 2s;\" />\n      </svg>\n\
    \    `;\n  }\n  else if (state === 'windy' || state === 'windy-variant' || state\
    \ === 'fog') {\n    color = '#B0BEC5';\n    svg = `\n      <svg viewBox=\"0 0\
    \ 64 64\" style=\"width: 30px; height: 30px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5));\
    \ transform: translateY(3px);\">\n        <path d=\"M46 34a10 10 0 0 0-4-19 14\
    \ 14 0 0 0-26 2 8 8 0 0 0-2 15h32z\" fill=\"#CFD8DC\" />\n        <g stroke=\"\
    #90A4AE\" stroke-width=\"3\" stroke-linecap=\"round\">\n          <line x1=\"\
    16\" y1=\"44\" x2=\"48\" y2=\"44\" style=\"animation: wind_drift 2s infinite;\"\
    \ />\n          <line x1=\"20\" y1=\"50\" x2=\"44\" y2=\"50\" style=\"animation:\
    \ wind_drift 2s infinite 1s;\" />\n        </g>\n      </svg>\n    `;\n  }\n \
    \ else {\n    // cloudy\n    color = '#9E9E9E';\n    svg = `\n      <svg viewBox=\"\
    0 0 64 64\" style=\"width: 30px; height: 30px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5));\
    \ transform: translateY(3px);\">\n        <path d=\"M46 44a10 10 0 0 0-4-19 14\
    \ 14 0 0 0-26 2 8 8 0 0 0-2 15h32z\" fill=\"#E0E0E0\" />\n        <path d=\"M40\
    \ 46a8 8 0 0 0-2-12 10 10 0 0 0-18 2 6 6 0 0 0-2 10h22z\" fill=\"#CFD8DC\" opacity=\"\
    0.8\" />\n      </svg>\n    `;\n  }\n  \n  return `\n    <div style=\"width: 100%;\
    \ height: 100%; min-height: 56px; display: flex; flex-direction: column; align-items:\
    \ center; justify-content: space-between; padding-bottom: 6px; padding-top: 4px;\
    \ box-sizing: border-box; background: linear-gradient(135deg, ${color}33 0%, ${color}0D\
    \ 100%); border-top-left-radius: 20px; border-bottom-left-radius: 20px;\">\n \
    \     <div style=\"flex-grow: 1; display: flex; align-items: center; justify-content:\
    \ center; animation: weather_bob_svg 3s ease-in-out infinite;\">${svg}</div>\n\
    \      <span style=\"font-size: 10px; font-weight: 800; color: white; text-transform:\
    \ uppercase; letter-spacing: 1px; text-shadow: 0 1px 2px rgba(0,0,0,0.8); margin-top:\
    \ -2px;\">MÉTÉO</span>\n    </div>\n    <style> \n      @keyframes weather_bob_svg\
    \ { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-2px);\
    \ } }\n      @keyframes spin_sun { 100% { transform: rotate(360deg); } }\n   \
    \   @keyframes rain_drop { 0% { transform: translate(0,0); opacity:1; } 100% {\
    \ transform: translate(-4px,8px); opacity:0; } }\n      @keyframes zap_flash {\
    \ 0%, 100% { opacity: 1; } 50% { opacity: 0; } }\n      @keyframes snow_fall {\
    \ 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(10px);\
    \ opacity: 0; } }\n      @keyframes wind_drift { 0% { transform: translateX(0);\
    \ opacity: 0.5; } 50% { transform: translateX(4px); opacity: 1; } 100% { transform:\
    \ translateX(0); opacity: 0.5; } }\n    </style>\n  `;\n]]]\n"
  details:
    card:
      type: custom:clock-weather-card
      entity: weather.home
      title: null
      sun_entity: sun.sun
      temperature_sensor: sensor.outdoor_temp
      humidity_sensor: sensor.outdoor_humidity
      weather_icon_type: line
      animated_icon: true
      forecast_rows: 1
      hide_today_section: true
      hide_forecast_section: false
      show_humidity: true
      hide_clock: true
      hide_date: true
      hourly_forecast: false
      use_browser_time: false
      show_decimal: false
      apparent_sensor: sensor.real_feel_temperature
      aqi_sensor: sensor.air_quality_index
      card_mod:
        style: "ha-card {\n  background: transparent !important;\n  border: none !important;\n\
          \  box-shadow: none !important;\n  padding: 0 !important;\n  margin: -15px\
          \ 0 !important;\n  pointer-events: none !important;\n}\n.card-content {\n\
          \  padding: 0 !important;\n  pointer-events: none !important;\n}\n.forecast_temp,\
          \ .today_temp, span.temperature {\n  font-size: 13px !important;\n  font-weight:\
          \ 600 !important;\n}\n.forecast {\n  font-size: 11px !important;\n}\n"
