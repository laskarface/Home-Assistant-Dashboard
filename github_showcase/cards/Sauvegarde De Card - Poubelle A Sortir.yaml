type: conditional
conditions:
- entity: sensor.poubelle_a_sortir
  state_not: none
card:
  type: custom:button-card
  entity: sensor.poubelle_a_sortir
  name: '[[[ return entity.attributes.original_title; ]]]

    '
  show_name: true
  show_label: false
  show_entity_picture: true
  show_icon: false
  entity_picture: "[[[\n  const type = entity.state.trim().toLowerCase();\n  const\
    \ v = new Date().getTime();\n  if (type === 'jaune') return `/local/garbage/yellow_bin.png?v=${v}`;\n\
    \  if (type === 'verte') return `/local/green_bin.png?v=${v}`;\n  if (type ===\
    \ 'verre') return `/local/glass_bin.png?v=${v}`;\n  return `/local/green_bin.png?v=${v}`;\
    \ \n]]]\n"
  variables:
    color: "[[[\n  const type = entity.state.trim().toLowerCase();\n  if (type ===\
      \ 'jaune') return '#FFEB3B';   // Jaune\n  if (type === 'verre') return '#00BCD4';\
      \   // Bleu/Cyan (Verre)\n  return '#4CAF50';                         // Vert\
      \ (DÃ©faut/Verte)\n]]]\n"
  styles:
    card:
    - background: rgba(20, 27, 38, 0.75)
    - backdrop-filter: blur(15px)
    - -webkit-backdrop-filter: blur(15px)
    - border-radius: 20px
    - padding: 12px
    - height: 80px
    - box-shadow: '[[[ return `0 0 20px ${variables.color}60, 0 8px 32px rgba(0,0,0,0.4)`;
        ]]]

        '
    - border: '[[[ return `1px solid ${variables.color}60`; ]]]

        '
    - transition: box-shadow 0.8s ease-in-out, border 0.8s ease-in-out
    grid:
    - grid-template-areas: '"i n"'
    - grid-template-columns: 80px 1fr
    - grid-template-rows: 1fr
    entity_picture:
    - width: 60px
    - height: 60px
    - object-fit: contain
    - filter: '[[[ return `drop-shadow(0 0 10px ${variables.color}44)`; ]]]'
    name:
    - font-size: 12px
    - font-weight: 700
    - color: '[[[ return variables.color; ]]]'
    - justify-self: start
    - text-align: left
    - margin-left: 5px
    - animation: blink 2s ease infinite
  extra_styles: "@keyframes blink {\n  0% { opacity: 1; }\n  50% { opacity: 0.35;\
    \ } \n  100% { opacity: 1; }\n}\n"
